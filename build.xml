<?xml version="1.0" encoding="UTF-8"?>

<!-- ====================================================================== -->
<!-- Ant build file (http://ant.apache.org/) for Ant 1.6.2 or above.        -->
<!-- ====================================================================== -->

<project name="portal-gproj-manage" default="test" basedir=".">


  <target name="import-maven-properties" unless="${app.openshift.domain}">
    <echo>Importing properties from pom.xml</echo>
    <xmlproperty file="pom.xml" keepRoot="false"/>
  </target>





  <!-- Temporary code -->

  <target name="upstream-dirs">
    <!--
         FIXME: This is used only in the one-off
         copy-upstream-modules target
    -->
    <mkdir dir="upstream/jbossas"/>
  </target>


  <target name="copy-upstream-modules"
          depends="import-maven-properties, upstream-dirs">
    <!-- FIXME: can't provide the domain name by way of substitution? -->
    <scp
        file="${app.openshift.uid}@${app.openshift.domain}:/var/lib/openshift/${app.openshift.uid}/jbossas/modules"
        verbose="true"
        preserveLastModified="true"
        failonerror="true"
        todir="upstream/jbossas/modules"
        keyfile="${user.home}/.ssh/id_rsa"
        />
  </target>



<!-- The following was generated by Maven Ant Plugin -->

  <!-- ====================================================================== -->
  <!-- Import maven-build.xml into the current project                        -->
  <!-- ====================================================================== -->


<import file="maven-build.xml"/>

  <!-- ====================================================================== -->
  <!-- Help target                                                            -->
  <!-- ====================================================================== -->

  <target name="help">
    <echo message="Please run: $ant -projecthelp"/>
  </target>

</project>
